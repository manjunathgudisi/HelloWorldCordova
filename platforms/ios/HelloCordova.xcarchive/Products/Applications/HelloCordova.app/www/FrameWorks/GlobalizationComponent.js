
//////////////******************** Metadata Embedded with the Application START ***********//////////////////////////////
//Authentication_Page =1;
//Login_Page=2;
var IntialGlobalizationMetadata = {

    '-1': { //All Services
        '-1': {  //All Organizations
            '1': { //Authentication page
                'en-us': {  //Language
                    'SignIn': 'Sign In', //Key-Value pair
                    'PageTitle': 'Please make sure Internet available to Register the Device',
                    'TokenNumber': 'Token Number',
                    'TokenInvalid': 'VL-CU-AUT-001 :: Please enter valid Token Number',
                    'TokenExpired': 'VL-CU-AUT-002 :: Your Token has expired. Please generate a new Token Number and proceed',
                    'NoInternetConnection': 'IN-ER-AUT-001 :: Please check your Internet Connectivity',
                    'ProvideTokenDetails': 'MN-RQ-AUT-001 :: Please enter Token Number',
                    'ServerError': 'IN-ER-AUT-002 :: Server error please contact Administrator',
                    'DeviceRegistrationError': 'IN-ER-AUT-003 :: Error while Registering the Device. Please Contact Administrator',
                    'NoInternetConnectionToRegisterDevice': 'IN-ER-AUT-004 :: Please make sure Internet available to Register the Device',
                    'Title_Error': 'Error',
                    'Title_Success': 'Success',
                    'Title_Warning': 'Warning',
                    'Title_Notification': 'Notification',
                    'DefaultException': 'DF-EX-AUT-001 :: Contact Administrator',
                    'Registering the Device': 'Registering the Device',
                    'ChangeURL': 'Change URL',
                    'ServiceURL': 'Service URL',
                    'SaveURL': 'Save URL',
                },                
                'ar-ae': {
                    'PageTitle': 'يرجى التأكد من الإنترنت متاحة للتسجيل جهاز',
                    'SignIn': 'تسجيل الدخول',
                    'Register': 'تسجيل',
                    'ChangeURL': 'تغيير عنوان الموقع',
                    'SaveURL': 'حفظ رابط',
                    'ServiceURL': 'رابط الخدمة',
                    'ServerError': 'IN-ER-AUT-002 :: خطأ خادم يرجى الاتصال بمسؤول',
                    'NoInternetConnection': 'IN-ER-AUT-001 :: يرجى التحقق من الاتصال بالإنترنت',
                    'NoInternetConnectionToRegisterDevice': 'IN-ER-AUT-004 :: يرجى التأكد من الإنترنت متاحة للتسجيل جهاز',
                    'Registering the Device': 'تسجيل جهاز',
                    'DeviceRegistrationError': 'IN-ER-AUT-003 :: خطأ أثناء تسجيل الأجهزة. الرجاء الاتصال بمسؤول',
                    'Title_Error': 'خطأ',
                    'Title_Success': 'نجاح',
                    'Title_Warning': 'تحذير',
                    'Title_Notification': 'إعلام',
                    'DefaultException': 'DF-EX-AUT-001 :: اتصل بمسؤول',
               
                }
            },

            '2': {  //Login page
                'en-us': { //Language
                    'SignIn': 'Sign In', //Key-Value pair
                    'UserName': 'Username',
                    'PassWord': 'Password',
                    'NoInternetConnection': 'IN-ER-AUT-002 :: Please check your Internet Connectivity',
                    'ProvideCredentials': 'MN-RQ-AUT-002 :: Please provide Credentials',
                    'PasswordMismatch': 'VL-CU-AUT-004 :: Please enter valid Password',
                    'InvalidCredential': 'VL-CU-AUT-003 :: Please provide valid Credentials',
                    'ServerError': 'IN-ER-AUT-002 :: Server error please contact Administrator',
                    'Title_Error': 'Error',
                    'Title_Success': 'Success',
                    'Title_Warning': 'Warning',
                    'Title_Notification': 'Notification',
                    'DefaultException': 'DF-EX-AUT-001 :: Contact Administrator',
                    'RememberCredentials': 'Remember Credentials',
                    'NewUpdateAvailable': 'New update available, please press Ok to continue',
                    'BeforeRefreshStart': 'IN-MG-AUP-016 :: You might loose unsychronized data. Please upload before refresh.',
                    'UploadOnProgress': 'IN-MG-AUP-016 :: We are going to upload all unsynched records. Please wait while the process completes.',
                    'NewUpdateAvailablePart1': 'Your Upgrade to Oneview ',
                    'NewUpdateAvailablePart2': ' is ready. Press OK to continue.\nCurrent Version : ',
                    'ProcessStartPart1Key': 'Your Upgrade to WiNAiM ',
                    'ProcessStartPart2Key': ' is ready. Following steps will be performed : ',
                    'ProcessCompletionKey': 'Congratulations ...!!! :: You have successfully upgraded to Latest Version ',
                    'Step': 'Step ',
                    'of': ' of ',
                    'Step1PreMsgKey': 'Upload all unsynchronized data.',
                    'Step1SuccessMsgKey': '',
                    'Step1ExcepMsgKey': '',

                    'Step2PreMsgKey': 'Upgrade to latest version.',
                    'Step2SuccessMsgKey': '',
                    'Step2ExcepMsgKey': '',

                    'Step3PreMsgKey': 'Refresh WiNAiM Updates.',
                    'Step3SuccessMsgKey': '',
                    'Step3ExcepMsgKey': '',
                    'ProcessCompletionMsgKey': 'Congratulations ...!!! :: You have successfully upgraded to Latest Version ',

                    'StepUploadDbPreMsgKey': 'Upload database',
                    'StepUploadDbSuccessMsgKey': '',
                    'StepUploadDbExcepMsgKey': '',

                    'CopyDb': 'Copy Db',
                    'UploadDb': 'Upload Db',

                    'CopyData': 'Copy Data',
                    'UploadData': 'Upload Data',

                    'Snapshot': 'Snapshot',

                    'StepSchemaPreMsgKey': 'Upgrade Schema to latest version.',
                    'StepSchemaSuccessMsgKey': '',
                    'StepSchemaExcepMsgKey': '',
                    'Downloading': 'Synchronization in-progress',

                },
                'ar-ae': {
                    'SignIn': 'إشارة', 
                    'Username': 'اسم المستخدم',
                    'Password': 'كلمه السر',
                    'OrganizationName': 'إسم المنظمة',
                    'RememberCredentials': 'تذكر وثائق التفويض',
                    'Snapshot': 'لقطة',
                    'NoInternetConnection': 'IN-ER-AUT-002 :: يرجى التحقق من الاتصال  بالإنترنت',
                    'ProvideCredentials': 'MN-RQ-AUT-002 :: يرجى تقديم وثائق التفويض',
                    'PasswordMismatch': 'VL-CU-AUT-004 :: الرجاء إدخال كلمة السر الصحيحة',
                    'InvalidCredential': 'VL-CU-AUT-003 :: يرجى تقديم أوراق الاعتماد صالحة',
                    'ServerError': 'IN-ER-AUT-002 :: خطأ خادم يرجى الاتصال بمسؤول',
                }
            },

            '16': {  //APK Upgrade Page
                'en-us': { //Language
                    'DefaultException': 'Error : Contact Administrator',
                    'Add': 'Save',
                    'Save': 'Save',
                    'SavedSuccessfully': 'IN-SU-CP-001 :: Record added successfully',
                    'UpdatedSuccessfully':  'IN-SU-CP-002 :: Record updated successfully',
                    'SaveSubmit':  'Save & Submit',
                    'Back':  'Back',
                    'Clear':  'Clear',
                    'Add':  'Save',
                    'Save':  'Save',
                    'DynamicCreationNotEnabled':  'IN-SU-CP-003 :: Dynamic data cannot be created',
                    'MannualNCConfirmBoxHeader':  'Non Conformance',

                    'No':  'IN-MG-MSE-004 :: No',
                    'Probe':  'IN-MG-MSE-003 :: Probe',
                    'ProbeSuccess':  'IN-MG-MSE-003 :: Probe',
                    'ProbeConnectionLost':  'connection is lost, please go to settings page and reconnect the probe.',
                    'ProbeConnected':  'connection is active.',
                    'NoProbeConnected':  'is connected, please go to settings page and connect the probe.',
                    'ProbeConnectionLostOrNoProbe':  'IN-MG-MSE-004 :: No probe connected, please go to settings page and reconnect the probe.',

                    'NoInternetConnection':  'Please check your Internet Connectivity',
                    'UploadSuccess':  'Upload finished successfully',
                    'UploadFailed':  'Server error please contact Administrator',
                    'NoDc':  'No data available for Upload',
                    'Title_Error':  'Error',
                    'Title_Success':  'Success',
                    'Title_Warning':  'Warning',
                    'Title_Notification':  'Notification',

                    'Not_Enabled':  'This feature is not enabled. Please contact Administrator',
                    'UploadSuccess':  'IN-SU-MAU-001 :: Data uploaded successfully',
                    'UploadFailed':  'IN-ER-MAU-001 :: Server error please contact Administrator',
                    'UploadFailedLocal':  'IN-ER-MAU-002 :: Upload failed. Please try again',
                    'NoDataForUpload':  'IN-IN-MAU-001 :: No data available for Upload',
                    'AlreadyUpload':  'IN-IN-MAU-002 :: This data already Uploaded',
                    'Upload_confirm_Message':  'IN-MG-MAU-001 :: Are you sure you want to Upload ?',
                    'Upload_confirm_Title':  'Upload',
                    'NoInternetConnection':  'IN-ER-MAU-003 :: Please check your Internet Connectivity',
                    'Upload_Summary_Title':  '**** Upload Summary ****',
                    'Upload_Status':  'Upload status',
                    'Upload_Summary_TotalRecords':  'Total records',
                    'Upload_Summary_UploadedRecords':  'Uploaded records',
                    'Upload_Summary_FailedRecords': 'Failed records',
                    'NewUpdateAvailable': 'New update available, please press Ok to continue',
                    'APKUpgradeProcessMsg': 'APK Upgrade is on-progress.....!!!',
                    'CautionMsg': 'Caution :: Please make sure you are connected to internet throughout upgrade process and there is enough battery in device for upgrade process.',
                    'BeforeRefreshStart': 'IN-MG-AUP-016 :: You might loose unsychronized data. Please upload before refresh.',
                    'UploadOnProgress': 'IN-MG-AUP-016 :: We are going to upload all unsynched records. Please wait while the process completes.',
                    'NewUpdateAvailablePart1': 'Your Upgrade to Oneview ',
                    'NewUpdateAvailablePart2': ' is ready. Press OK to continue.\nCurrent Version : ',
                    'ProcessStartPart1Key': 'Your Upgrade to WiNAiM ',
                    'ProcessStartPart2Key': ' is ready. Following steps will be performed : ',
                    'ProcessCompletionKey': 'Congratulations ...!!! :: You have successfully upgraded to Latest Version ',
                    'Step': 'Step ',
                    'of': ' of ',
                    'Step1PreMsgKey': 'Upload all unsynchronized data.',
                    'Step1SuccessMsgKey': '',
                    'Step1ExcepMsgKey': '',

                    'Step2PreMsgKey': 'Upgrade to latest version.',
                    'Step2SuccessMsgKey': '',
                    'Step2ExcepMsgKey': '',

                    'Step3PreMsgKey': 'Refresh WiNAiM Updates.',
                    'Step3SuccessMsgKey': '',
                    'Step3ExcepMsgKey': '',
                    'ProcessCompletionMsgKey': 'Congratulations ...!!! :: You have successfully upgraded to Latest Version ',

                    'StepUploadDbPreMsgKey': 'Upload database',
                    'StepUploadDbSuccessMsgKey': '',
                    'StepUploadDbExcepMsgKey': '',

                    'CopyDb': 'Copy Db',
                    'UploadDb': 'Upload Db',

                    'CopyData': 'Copy Data',
                    'UploadData': 'Upload Data',

                    'Snapshot': 'Snapshot',
                }
            }
        }
    }
};

//////////////******************** Metadata Embedded with the Application END ***********//////////////////////////////


//////////////******************** Metadata downloaded from server for Static Pages and Templates as well, will be saved in this global variable START ***********//////////////////////////////
var GlobalizationMetadata = {};

//    {
//    '1': { //Service
//        '1': {  //Organization
//            '442': { //Chiller  Freezer template
//                'en-us': {  //Language
//                    'PageTitle': 'Chiller  Freezer Checking (Manual) Record (EKFC 1) Rev 03 (HYG 071) hi',
//                    'PageTitleUnit2': 'Chiller Freezer Checking (Manual) Record (EKFC 2) Rev 02 (HYG 060) hi',
//                    'ChillerFreezerDetails': 'Chiller Freezer Details hi',
//                    'Shift': 'Shift: hi',
//                    'Location': 'Location hi', 
//                    'Type': 'Type hi',
//                    'Machine': 'Machine hi',
//                    'TimeChecked': 'Time Checked hi',
//                    'GaugeTemp': 'Gauge Temp. hi',
//                    'AirProbeTemp': 'Air Probe Temp. hi',
//                    'VariationinTemp': 'Variation in Temp. hi',
//                }
//            },

//            '-1': { //Common for all pages
//                'en-us': {  //Language
//                    'SaveSubmit': 'hello Save & Submit',
//                    'Add': 'Save hi',
//                }
//            }
//        }
//    }
//};
//////////////******************** Metadata downloaded from server for Static Pages and Templates as well, will be saved in this global variable END ***********//////////////////////////////


//////////////******************** List of Static Pages for which Globalization Metadata will be downloaded at time of user login START ***********//////////////////////////////
//Common :-1
//DashBoard_Page : 3
//MyAlerts_Page : 4
//ProfileDownload_Page : 5
//MyAudit_Page : 6
//Upload_Page : 7
//Settings_Page :8
//NewDC_Page :9
//SideMenuPanel_Page :10
//ViewRecords_Page :11
//Action_Page :12
//Support_Page :13
//My Action Downloads : 14
//////////////******************** List of Static Pages for which Globalization Metadata will be downloaded at time of user login START ***********//////////////////////////////


//Read Metadata from Db and Store in Global Variable
//Case1 : Metadata for Token and Login Page will be took by global variable and not from db (not supporting all services and all organization)
//Case2 : Metadata for the static pages need to take from db and store in global variable (At the time of login a service call to get metadata for static pages)
//Case3 : MetaData for particular templates will be downloaded at the time of profile download and will be saved in local db. Each template page load time we'll fetch the metadata from db for particular template
//and convert it into our format and store in a global variable for the particular template.
function GlobalizationComponent() {

    var MyInstance = this;
    var currentLanguage = OneViewGlobalcurrentLanguage;
    var currentPage = '1';
    
  //  var TemplateNodeId = OneViewSessionStorage.Get("TemplateId");

    
    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Gets Metadata for particular list of pages or templates from database 
    /// Have to pass either one list page or template(both not allowed)
    /// </summary> 
    ///<param name="currentLanguage">for which language metadata format need to do  ,DataType:String </param> 
    ///<param name="currentPage">for which language metadata format need to do  ,DataType:String </param>
    ///<returns>MetaDataList = > meta data from sqlLite ,DataType:Custom , Fromat: ex1: [{ServiceId :'1', 'OrganizationId' : '1', 'PageId' :'3' ,'TemplateId' :'0', LocalisedConfig :{'en-us' : {'PageTitle': 'Cooking Mo0nitring' , 'Pro' : 'Product'}}]</returns>
    this.LoadLocalizedMetadata = function (PageList,TemplateList) {
        try {
            var ServiceId = OneViewSessionStorage.Get("ServiceId");
            var OrganizationId = OneViewSessionStorage.Get("OrganizationId");
         
            var oGlobalizationMetdataDAO = new GlobalizationMetdataDAO();
            var MetaDataList = oGlobalizationMetdataDAO.GetMetaData(ServiceId, OrganizationId, PageList, TemplateList);

            return MetaDataList;
        }
        catch (Excep) {
           // alert('LoadLocalizedMetadata Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.LoadLocalizedMetadata", Excep);
        }
    }

    
    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    ///
    /// Updated User v1: Sangeeta Bhatt
    /// Updated Date v1: 18-06-205 18:30 AM
    /// Remarks      v1:
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Format metadata from sqllite to required structre for easy and efficent traversing and update into global variable 'GlobalizationMetadata'
    /// </summary>
    ///<param name="MetaDataList">meta data from sqlLite ,DataType:Custom , Fromat: ex1: [{ServiceId :'1', 'OrganizationId' : '1', 'PageId' :'3' ,'TemplateId' :'0', LocalisedConfig :{'en-us' : {'PageTitle': 'Cooking Mo0nitring' , 'Pro' : 'Product'}}] </param>   
    ///<param name="currentLanguage">for which language metadataformat need to do  ,DataType:String </param>  
    ///<returns>empty</returns> 
    this.FormGlobalizationMeta = function (MetaDataList, currentLanguage) {
        try {
            if (MetaDataList != undefined && MetaDataList != null && MetaDataList != '') {
                var ServiceId = OneViewSessionStorage.Get("ServiceId");
                var OrganizationId = OneViewSessionStorage.Get("OrganizationId");
                //alert('FormGlobalizationMeta ' + JSON.stringify(MetaDataList));
                //alert('ServiceId' + ServiceId + "OrganizationId :" + OrganizationId);
                var PageOrTemplateDict;
                var OrgDict = {};

                if (MyInstance.IsDictionaryEmpty(GlobalizationMetadata) == true) {
                    OrgDict[OrganizationId] = {};
                    GlobalizationMetadata[ServiceId] = OrgDict;
                }


                for (var i = 0; i < MetaDataList.length; i++) {
                    var LangDict = {};
                    PageOrTemplateDict = {};
                    var PageOrTemplateId;

                    LangDict[currentLanguage] = ((MetaDataList[i].LocalisedConfig)[currentLanguage]);
                    if (MetaDataList[i].TemplateNodeId == 0 || MetaDataList[i].TemplateNodeId == '0') {
                        PageOrTemplateId = MetaDataList[i].PageId;
                    }
                    else if (MetaDataList[i].PageId == 0 || MetaDataList[i].PageId == '0') {
                        PageOrTemplateId = 'T' + MetaDataList[i].TemplateNodeId;//MetaDataList[i].TemplateNodeId;
                    }

                    if (GlobalizationMetadata[ServiceId][OrganizationId] == undefined || GlobalizationMetadata[ServiceId][OrganizationId] == "" || GlobalizationMetadata[ServiceId][OrganizationId] == null) {
                        GlobalizationMetadata[ServiceId][OrganizationId][PageOrTemplateId] = LangDict;
                        // alert('Case 1' + JSON.stringify(GlobalizationMetadata));
                    }
                    else if ((GlobalizationMetadata[ServiceId] ? ((GlobalizationMetadata[ServiceId])[OrganizationId]) : undefined) != undefined) {
                        GlobalizationMetadata[ServiceId][OrganizationId][PageOrTemplateId] = LangDict;
                        //alert('Case 2' + JSON.stringify((GlobalizationMetadata[ServiceId])[OrganizationId]));
                    }
                    else {
                        PageOrTemplateDict[PageOrTemplateId] = LangDict;
                        OrgDict[(MetaDataList[i].OrganizationId)] = PageOrTemplateDict;
                        GlobalizationMetadata[(MetaDataList[i].ServiceId)] = OrgDict;
                        // alert('Case 3' + JSON.stringify(GlobalizationMetadata[(MetaDataList[i].ServiceId)]));
                    }
                }

                //  alert('GlobalizationMetadata : ' + JSON.stringify(GlobalizationMetadata));
            }
        }
        catch (Excep) {
           // alert('FormGlobalizationMeta Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.FormGlobalizationMeta", Excep);
        }
    }

    this.GetCurrentPageMeta = function (currentPage) {
        try {
            var ServiceId = OneViewSessionStorage.Get("ServiceId");
            var OrganizationId = OneViewSessionStorage.Get("OrganizationId");
            if (GlobalizationMetadata != undefined && GlobalizationMetadata != null && GlobalizationMetadata != '') {
                var CurrentPageMeta = ((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage];
            }
        }
        catch (Excep) {
           // alert('GetCurrentPageMeta Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.GetCurrentPageMeta", Excep);
        }
    }


    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Gives globalization string for the passed MessageKey
    /// Order of searching message key in metadata :
    ///  1. Service,Organization,CurrentPage
    ///  2. Service,Organization,CommonPage
    ///  3. Service,-1,CurrentPage
    ///  4. Service,-1,CommonPage
    /// </summary>
    ///<param name="MessageKey">message key need to be replaced by globalization string ,DataType:String
    ///<param name="currentPage">for which language metadataformat need to do  ,DataType:String </param> 
    ///<param name="currentLanguage">for which language metadataformat need to do  ,DataType:String </param> 
    ///<returns>MessageString(Globalization String need to be displayed,DataType:String )</returns> 
    this.GetKeyValue = function (MessageKey, currentPage, currentLanguage) {
        try {
            var ServiceId = OneViewSessionStorage.Get("ServiceId");
            var OrganizationId = OneViewSessionStorage.Get("OrganizationId");

            var MessageString;
            var CurrentPageMeta;
            if (GlobalizationMetadata != undefined && GlobalizationMetadata != null && GlobalizationMetadata != '') {

                CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])[OrganizationId] != undefined ?
                    (((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage] != undefined ? (((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage][currentLanguage] != undefined ?
                    ((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage][currentLanguage] : undefined) : undefined) : undefined) : undefined);
              
                if (CurrentPageMeta != undefined) {
                    //Check in currentPage for particular service and organization
                    MessageString = CurrentPageMeta[MessageKey];
                }
                if (MessageString == undefined || MessageString == null || MessageString == '') {
                    //Check in common page for particular service and organization
                    CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])[OrganizationId] != undefined ?
                    (((GlobalizationMetadata[ServiceId])[OrganizationId])['-1'] != undefined ? (((GlobalizationMetadata[ServiceId])[OrganizationId])['-1'][currentLanguage] != undefined ?
                    ((GlobalizationMetadata[ServiceId])[OrganizationId])['-1'][currentLanguage] : undefined) : undefined) : undefined) : undefined);
                  
                    if (CurrentPageMeta != undefined) {
                        MessageString = CurrentPageMeta[MessageKey];
                    }

                }
                if (MessageString == undefined || MessageString == null || MessageString == '') {
                    //Check in currentPage for particular service and all organization
                    CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])['-1'] != undefined ?
                   (((GlobalizationMetadata[ServiceId])['-1'])[currentPage] != undefined ? (((GlobalizationMetadata[ServiceId])['-1'])[currentPage][currentLanguage] != undefined ?
                   ((GlobalizationMetadata[ServiceId])['-1'])[currentPage][currentLanguage] : undefined) : undefined) : undefined) : undefined);

                    if (CurrentPageMeta != undefined) {
                        MessageString = CurrentPageMeta[MessageKey];
                    }
                }
                if (MessageString == undefined || MessageString == null || MessageString == '') {
                    //Check in common Page for particular service and all organization 
                    CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])['-1'] != undefined ?
                   (((GlobalizationMetadata[ServiceId])['-1'])['-1'] != undefined ? (((GlobalizationMetadata[ServiceId])['-1'])['-1'][currentLanguage] != undefined ?
                   ((GlobalizationMetadata[ServiceId])['-1'])['-1'][currentLanguage] : undefined) : undefined) : undefined) : undefined);

                    if (CurrentPageMeta != undefined) {
                        MessageString = CurrentPageMeta[MessageKey];
                    }
                }
            }

            if (MessageString == undefined || MessageString == null || MessageString == '') {
                return MessageKey;
            }
            else {
                return MessageString;
            }
        }

        catch (Excep) {
            // alert('GetKeyValue Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.GetKeyValue", Excep);
        }
    }




    
    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Gives globalization string for passed MessageKey for UniversalPages i.e Login and Token
    /// </summary>
    ///<param name="MessageKey">message key need to be replaced by globalization string ,DataType:String
    ///<param name="currentPage">for which language metadataformat need to do  ,DataType:String </param> 
    ///<param name="currentLanguage">for which language metadataformat need to do  ,DataType:String </param> 
    ///<returns>MessageString(Globalization String need to be displayed,DataType:String )</returns>
    this.GetKeyValueForUniversalPages = function (MessageKey, currentPage,currentLanguage) {
        try {
            var MessageString;
            var CurrentPageMeta;
           
            if (IntialGlobalizationMetadata != undefined && IntialGlobalizationMetadata != null && IntialGlobalizationMetadata != '') {
                CurrentPageMeta = (IntialGlobalizationMetadata['-1'] != undefined ? ((IntialGlobalizationMetadata['-1'])['-1'] != undefined ?
                    (((IntialGlobalizationMetadata['-1'])['-1'])[currentPage] != undefined ? ((((IntialGlobalizationMetadata['-1'])['-1'])[currentPage])[currentLanguage] != undefined ?
                    (((IntialGlobalizationMetadata['-1'])['-1'])[currentPage])[currentLanguage] : undefined) : undefined) : undefined) : undefined);
             
                //alert('GetKeyValueForUniversalPages :' + JSON.stringify(CurrentPageMeta));
                if (CurrentPageMeta != undefined) {                   
                    //Check in currentPage for particular service and organization
                    MessageString = CurrentPageMeta[MessageKey];
                }
            }

           // alert('MessageString :' + MessageString);
            if (MessageString == undefined || MessageString == null || MessageString == '') {
                return MessageKey;
            }
            else {               
                return MessageString;
            }
        }

        catch (Excep) {
            //alert('GetKeyValueForUniversalPages Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.GetKeyValueForUniversalPages", Excep);
        }
    }
     

    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Gives globalization string for the passed MessageKey
    /// </summary>
    ///<param name="MessageKey">message key need to be replaced by globalization string ,DataType:String
    ///<param name="currentPage">for which language metadataformat need to do  ,DataType:String </param> 
    ///<param name="currentLanguage">for which language metadataformat need to do  ,DataType:String </param> 
    ///<returns>MessageString(Globalization String need to be displayed,DataType:String )</returns>
    this.GetLocalizedString = function (MessageKey, currentPage, currentLanguage) {
        try {
            var ResponseString;
            if (currentPage == 1 || currentPage == 2 || currentPage == 16) {
                ResponseString = MyInstance.GetKeyValueForUniversalPages(MessageKey, currentPage, currentLanguage);
            }
            else {
                ResponseString = MyInstance.GetKeyValue(MessageKey, currentPage, currentLanguage);
            }

            return ResponseString;
        }

        catch (Excep) {
            //alert('GetLocalizedString Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.GetLocalizedString", Excep);
        }
    }


    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Checks if dictionary is empty
    /// </summary>
    ///<param name="TempDict">Dictionary which we need to check it is empty or not ,DataType:Custom, Fromat: ex1:{} 
    ///<returns>True/False(True implies Dictionary is empty , False implies dictionary contains some data)</returns>
    this.IsDictionaryEmpty = function (TempDict) {
        try {
            var IsEmpty = true;

            for (var key in TempDict) {
                IsEmpty = false;
                break;
            }

            return IsEmpty;
        }

        catch (Excep) {
           // alert('IsDictionaryEmpty Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.IsDictionaryEmpty", Excep);
        }
    }

    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Load Metadata for particular template and language
    /// Gets the metadata for particular template from database and formats to our required structure and Saves in global variable
    /// </summary> 
    ///<param name="currentLanguage">for which language metadata format need to do  ,DataType:String </param> 
    ///<param name="currentPage">for which language metadata format need to do  ,DataType:String </param>
    ///<returns>empty</returns>
    this.LoadTemplateWiseGlobalizationMetadata = function (currentLanguage, currentPage) {
        try {       
           // alert('GlobalizationMetadata before :' + JSON.stringify(GlobalizationMetadata));
            var TemplateList = [];
            currentPage = currentPage.substring(1);
            TemplateList.push(currentPage);
            //Get metadata for particular template from Db and convert to required structure          
            var MetaDataList = MyInstance.LoadLocalizedMetadata(undefined, TemplateList);
           // alert('MetaDataList :' + JSON.stringify(MetaDataList));
            MyInstance.FormGlobalizationMeta(MetaDataList, currentLanguage);

           // alert('GlobalizationMetadata after :' + JSON.stringify(GlobalizationMetadata));
        }
        catch (Excep) {
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.LoadTemplateWiseGlobalizationMetadata", Excep);
        }
    }


    this.GetCurrentPageGlobalizationMetadata = function (currentPage, currentLanguage) {
        try {
            OneViewConsole.Debug("GetCurrentPageGlobalizationMetadata Start", "GlobalizationComponent.GetCurrentPageGlobalizationMetadata");

            var ServiceId = OneViewSessionStorage.Get("ServiceId");
            var OrganizationId = OneViewSessionStorage.Get("OrganizationId");

            var CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])[OrganizationId] != undefined ?
                (((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage] != undefined ? (((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage][currentLanguage] != undefined ?
                ((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage][currentLanguage] : undefined) : undefined) : undefined) : undefined);

            //alert('CurrentPageMeta :' + JSON.stringify( CurrentPageMeta));
            if (CurrentPageMeta == undefined) {
                //Get metadata for particular template from Db and convert to required structure
                MyInstance.LoadTemplateWiseGlobalizationMetadata(currentLanguage);
            }

            OneViewConsole.Debug("GetCurrentPageGlobalizationMetadata End", "GlobalizationComponent.GetCurrentPageGlobalizationMetadata");
        }
        catch (Excep) {
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.GetCurrentPageGlobalizationMetadata", Excep);
        }
        finally {
        }
    }


    /// <DeveloperInfo>
    /// Created User : Sangeeta Bhatt
    /// Created Date : 17-06-205 18:30 AM
    /// </DeveloperInfo>
    ///
    /// <summary>
    /// Removes metadata for the currentPage from 'GlobalizationMetadata'
    /// </summary> 
    ///<param name="currentPage">for which language metadata format need to do  ,DataType:String </param>
    ///<returns>empty</returns>
    this.RemoveCurrentPageGlobalizationMetadata = function (currentPage) {
        try {
            OneViewConsole.Debug("RemoveCurrentPageGlobalizationMetadata Start", "DataCaptureBO.RemoveCurrentPageGlobalizationMetadata");
            // alert('GlobalizationMetadata before :' + JSON.stringify(GlobalizationMetadata));

            var ServiceId = OneViewSessionStorage.Get("ServiceId");
            var OrganizationId = OneViewSessionStorage.Get("OrganizationId");

            var temp = (GlobalizationMetadata[ServiceId] != undefined) ? (GlobalizationMetadata[ServiceId][OrganizationId] != undefined ? (GlobalizationMetadata[ServiceId][OrganizationId][currentPage] != undefined ? (delete GlobalizationMetadata[ServiceId][OrganizationId][currentPage]) : undefined) : undefined) : undefined

           //  alert('GlobalizationMetadata after :' + JSON.stringify(GlobalizationMetadata));

            OneViewConsole.Debug("RemoveCurrentPageGlobalizationMetadata End", "DataCaptureBO.RemoveCurrentPageGlobalizationMetadata");
        }
        catch (Excep) {
            // alert('11 RemoveCurrentPageGlobalizationMetadata Excep : ' + Excep);
            // alert('22 RemoveCurrentPageGlobalizationMetadata Excep : ' + JSON.stringify(Excep));
            throw oOneViewExceptionHandler.Create("Framework", "DataCaptureBO.RemoveCurrentPageGlobalizationMetadata", Excep);
        }
        finally {
        }
    }


    /// <summary>
    /// Gives globalization string for the passed MessageKey
    /// If key doesn't exist it returns undefined
    /// </summary>
    this.GetLocalizedStringIfExists = function (MessageKey, currentPage, currentLanguage) {
        try {

            var MessageString;
            var CurrentPageMeta;

            if (currentPage == 1 || currentPage == 2 || currentPage == 16) {


                if (IntialGlobalizationMetadata != undefined && IntialGlobalizationMetadata != null && IntialGlobalizationMetadata != '') {
                    CurrentPageMeta = (IntialGlobalizationMetadata['-1'] != undefined ? ((IntialGlobalizationMetadata['-1'])['-1'] != undefined ?
                        (((IntialGlobalizationMetadata['-1'])['-1'])[currentPage] != undefined ? ((((IntialGlobalizationMetadata['-1'])['-1'])[currentPage])[currentLanguage] != undefined ?
                        (((IntialGlobalizationMetadata['-1'])['-1'])[currentPage])[currentLanguage] : undefined) : undefined) : undefined) : undefined);

                    //alert('GetKeyValueForUniversalPages :' + JSON.stringify(CurrentPageMeta));
                    if (CurrentPageMeta != undefined) {
                        //Check in currentPage for particular service and organization
                        MessageString = CurrentPageMeta[MessageKey];
                    }
                }
            }
            else {

                var ServiceId = OneViewSessionStorage.Get("ServiceId");
                var OrganizationId = OneViewSessionStorage.Get("OrganizationId");

                if (GlobalizationMetadata != undefined && GlobalizationMetadata != null && GlobalizationMetadata != '') {

                    CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])[OrganizationId] != undefined ?
                        (((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage] != undefined ? (((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage][currentLanguage] != undefined ?
                        ((GlobalizationMetadata[ServiceId])[OrganizationId])[currentPage][currentLanguage] : undefined) : undefined) : undefined) : undefined);
                    
                    if (CurrentPageMeta != undefined) {
                        //Check in currentPage for particular service and organization
                        MessageString = CurrentPageMeta[MessageKey];
                    }
                    
                    if (MessageString == undefined || MessageString == null || MessageString == '') {
                        //Check in common page for particular service and organization
                        CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])[OrganizationId] != undefined ?
                        (((GlobalizationMetadata[ServiceId])[OrganizationId])['-1'] != undefined ? (((GlobalizationMetadata[ServiceId])[OrganizationId])['-1'][currentLanguage] != undefined ?
                        ((GlobalizationMetadata[ServiceId])[OrganizationId])['-1'][currentLanguage] : undefined) : undefined) : undefined) : undefined);

                        if (CurrentPageMeta != undefined) {
                            MessageString = CurrentPageMeta[MessageKey];
                        }

                    }
                    
                    if (MessageString == undefined || MessageString == null || MessageString == '') {
                        //Check in currentPage for particular service and all organization
                        CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])['-1'] != undefined ?
                       (((GlobalizationMetadata[ServiceId])['-1'])[currentPage] != undefined ? (((GlobalizationMetadata[ServiceId])['-1'])[currentPage][currentLanguage] != undefined ?
                       ((GlobalizationMetadata[ServiceId])['-1'])[currentPage][currentLanguage] : undefined) : undefined) : undefined) : undefined);

                        if (CurrentPageMeta != undefined) {
                            MessageString = CurrentPageMeta[MessageKey];
                        }
                    }
                    if (MessageString == undefined || MessageString == null || MessageString == '') {
                        //Check in common Page for particular service and all organization 
                        CurrentPageMeta = (GlobalizationMetadata[ServiceId] != undefined ? ((GlobalizationMetadata[ServiceId])['-1'] != undefined ?
                       (((GlobalizationMetadata[ServiceId])['-1'])['-1'] != undefined ? (((GlobalizationMetadata[ServiceId])['-1'])['-1'][currentLanguage] != undefined ?
                       ((GlobalizationMetadata[ServiceId])['-1'])['-1'][currentLanguage] : undefined) : undefined) : undefined) : undefined);
                       
                        if (CurrentPageMeta != undefined) {
                            MessageString = CurrentPageMeta[MessageKey];
                        }
                    }
                }
            }
            

            return MessageString;
        }

        catch (Excep) {
            //alert('GetLocalizedStringIfExists Excep :' + Excep);
            throw oOneViewExceptionHandler.Create("Framework", "GlobalizationComponent.GetLocalizedStringIfExists", Excep);
        }
    }
}